---
title: 쿠버네티스입문 10장 컨피그맵
categories: ["Kubernetes", "Book"]
tags: ["K8S", "Kubernetes", "쿠버네티스 입문", "컨피그맵", "configMap", "Book", "동양북스", "90가지 예제로 배우는 컨테이너 관리 자동화 표준"] 
toc: true
widgets:
  - type: toc
    position: right
sidebar:
  right:
    sticky: true
date: 2020-12-30 13:35:46
---

# ConfigMap
- 컨테이너에 필요한 환경 설정을 컨테이너와 분리해서 제공하는 기능

## 사용
- 설정
  ~~~
  apiVersion: v1
  kind: ConfigMap
  metadata:
    name: config-dev
  data:
    DB_URL: localhost
    DB_USER: myuser
    DB_PASS: mypass
    DEBUG_INFO: debug  
  ~~~
- 컨피그맵 일부만 사용
  ~~~
  spec:
    containers:
    - name:
      image:
      env:
      - name: DEBUG_LEVEL
        valueFrom:
          configMapKeyRef:
            name: config-dev
            key : DEBUG_INFO
  ~~~
  - .env[].valueFrom 사용
  - .env[].valueFrom.configMapKeyRef 를 통해 이미 정의된 configmap 사용
- 컨피그맵 전체를 불러오기
  ~~~
  spec:
    containers:
    - name:
      image:      
      envFrom:
      - configMapRef:
        name: config-dev      
  ~~~
- volume 에 바인딩 하기
  ~~~
  spec:
    containers:
    - name:
      image:
      volumeMounts:
      - name: config-volume
        mountPath: /etc/config
    volumes:
    - name: config-volume
      configMap:
        name: config-dev    
  ~~~
  - 컨테이너 내부에 파일로 저장한다.
  ~~~
  root@nginx-deployment-67b8444cdf-sp7lx:/# ls /etc/config/
  DB_PASS  DB_URL  DB_USER  DEBUG_INFO
  ~~~
  
---

> 출처 : 쿠버네티스 입문 - 90가지 예제로 배우는 컨테이너 관리자 자동화 표준 (동양북스)